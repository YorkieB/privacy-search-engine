version: '3.8'\n\nservices:\n  privacy-search:\n    build: .\n    ports:\n      - \"3001:3001\"\n    environment:\n      - NODE_ENV=production\n      - BRAVE_API_KEY=${BRAVE_API_KEY}\n      - PORT=3001\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--no-verbose\", \"--tries=1\", \"--spider\", \"http://localhost:3001/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n\n  # Optional: Add nginx reverse proxy for production\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/ssl:ro  # For SSL certificates\n    depends_on:\n      - privacy-search\n    restart: unless-stopped