# Privacy Search Engine - DigitalOcean Deployment Guide\n\nThis guide will help you deploy your Bing-style privacy search engine to a DigitalOcean droplet.\n\n## Prerequisites\n\n1. **DigitalOcean Droplet**: Ubuntu 20.04+ with at least 1GB RAM\n2. **Domain Name** (optional but recommended)\n3. **Brave Search API Key**: `BSAq4NtSqFFWRcGdfgz5V8VfvcH_rkc`\n\n## Quick Deployment\n\n### Option 1: Automated Script\n\n1. **Upload your project to the droplet:**\n   ```bash\n   scp -r \"./\" root@your-droplet-ip:/opt/privacy-search/\n   ```\n\n2. **SSH into your droplet:**\n   ```bash\n   ssh root@your-droplet-ip\n   ```\n\n3. **Run the deployment script:**\n   ```bash\n   cd /opt/privacy-search\n   chmod +x deploy.sh\n   ./deploy.sh\n   ```\n\n### Option 2: Manual Deployment\n\n1. **Install Docker:**\n   ```bash\n   curl -fsSL https://get.docker.com -o get-docker.sh\n   sudo sh get-docker.sh\n   sudo usermod -aG docker $USER\n   ```\n\n2. **Install Docker Compose:**\n   ```bash\n   sudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n   sudo chmod +x /usr/local/bin/docker-compose\n   ```\n\n3. **Create environment file:**\n   ```bash\n   cat > .env << EOL\n   NODE_ENV=production\n   PORT=3001\n   BRAVE_API_KEY=BSAq4NtSqFFWRcGdfgz5V8VfvcH_rkc\n   ALLOWED_ORIGIN=*\n   EOL\n   ```\n\n4. **Build and start:**\n   ```bash\n   docker-compose up --build -d\n   ```\n\n## Production Configuration\n\n### Enable HTTPS with Let's Encrypt\n\n1. **Install Certbot:**\n   ```bash\n   sudo apt install certbot\n   ```\n\n2. **Get SSL certificate:**\n   ```bash\n   sudo certbot certonly --standalone -d your-domain.com\n   ```\n\n3. **Update nginx.conf** with your domain and uncomment HTTPS section\n\n4. **Copy certificates:**\n   ```bash\n   sudo mkdir -p ssl\n   sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem ssl/your-cert.pem\n   sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem ssl/your-key.pem\n   ```\n\n5. **Restart with HTTPS:**\n   ```bash\n   docker-compose restart\n   ```\n\n### Firewall Configuration\n\n```bash\n# Enable UFW\nsudo ufw enable\n\n# Allow SSH\nsudo ufw allow ssh\n\n# Allow HTTP and HTTPS\nsudo ufw allow 80\nsudo ufw allow 443\n\n# Check status\nsudo ufw status\n```\n\n## Management Commands\n\n### View logs:\n```bash\ndocker-compose logs -f privacy-search\n```\n\n### Restart application:\n```bash\ndocker-compose restart\n```\n\n### Update application:\n```bash\ngit pull  # or upload new files\ndocker-compose up --build -d\n```\n\n### Stop application:\n```bash\ndocker-compose down\n```\n\n### Health check:\n```bash\ncurl http://your-droplet-ip:3001/health\n```\n\n## Monitoring Setup\n\n### Basic monitoring with htop:\n```bash\nsudo apt install htop\nhtop\n```\n\n### Check application status:\n```bash\ndocker-compose ps\ndocker stats\n```\n\n## Backup Strategy\n\n1. **Backup environment file:**\n   ```bash\n   cp .env .env.backup\n   ```\n\n2. **Backup application files:**\n   ```bash\n   tar -czf privacy-search-backup-$(date +%Y%m%d).tar.gz .\n   ```\n\n## Troubleshooting\n\n### Application not starting:\n1. Check logs: `docker-compose logs privacy-search`\n2. Verify environment variables: `cat .env`\n3. Check port availability: `netstat -tlnp | grep 3001`\n\n### Performance issues:\n1. Check system resources: `htop`\n2. Monitor Docker stats: `docker stats`\n3. Check application logs for errors\n\n### SSL issues:\n1. Verify certificate files exist\n2. Check certificate expiry: `sudo certbot certificates`\n3. Renew if needed: `sudo certbot renew`\n\n## Security Checklist\n\n- [ ] Firewall configured (UFW)\n- [ ] SSL/HTTPS enabled\n- [ ] Strong SSH key authentication\n- [ ] Regular security updates\n- [ ] Environment variables secured\n- [ ] Application running as non-root user (handled by Docker)\n\n## Updates and Maintenance\n\n### Auto-renewal for SSL:\n```bash\n# Add to crontab\nsudo crontab -e\n# Add line:\n0 12 * * * /usr/bin/certbot renew --quiet\n```\n\n### System updates:\n```bash\n# Monthly system updates\nsudo apt update && sudo apt upgrade -y\ndocker system prune -f\n```\n\n## Support\n\nIf you encounter issues:\n1. Check the logs first\n2. Verify your environment configuration\n3. Test with health endpoint\n4. Check firewall and network settings\n\nYour Privacy Search Engine should now be running at `http://your-droplet-ip:3001`!