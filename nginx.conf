events {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream backend {\n        server privacy-search:3001;\n    }\n\n    server {\n        listen 80;\n        server_name your-domain.com www.your-domain.com;\n        \n        # Security headers\n        add_header X-Frame-Options DENY;\n        add_header X-Content-Type-Options nosniff;\n        add_header X-XSS-Protection \"1; mode=block\";\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n        \n        # Gzip compression\n        gzip on;\n        gzip_vary on;\n        gzip_min_length 1024;\n        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n        \n        location / {\n            proxy_pass http://backend;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection 'upgrade';\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n            proxy_cache_bypass $http_upgrade;\n            \n            # Timeouts\n            proxy_connect_timeout 60s;\n            proxy_send_timeout 60s;\n            proxy_read_timeout 60s;\n        }\n        \n        # Static file caching\n        location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg)$ {\n            proxy_pass http://backend;\n            expires 1y;\n            add_header Cache-Control \"public, immutable\";\n        }\n    }\n    \n    # Uncomment for HTTPS/SSL\n    # server {\n    #     listen 443 ssl http2;\n    #     server_name your-domain.com www.your-domain.com;\n    #     \n    #     ssl_certificate /etc/ssl/your-cert.pem;\n    #     ssl_certificate_key /etc/ssl/your-key.pem;\n    #     \n    #     # Modern SSL configuration\n    #     ssl_protocols TLSv1.2 TLSv1.3;\n    #     ssl_ciphers HIGH:!aNULL:!MD5;\n    #     ssl_prefer_server_ciphers on;\n    #     \n    #     # Same location blocks as above\n    # }\n}